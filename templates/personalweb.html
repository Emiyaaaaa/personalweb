{% load staticfiles %}
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>Emiya</title>
	<link rel="icon" type="image/png" href="/media/{{ website_icon }}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/font.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/color.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/left/left.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/right/right.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/middle/matter0.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/middle/matter1.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/middle/matter2.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/middle/matter3.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/middle/window.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/middle/markdown.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/middle/window-bubbly-button.css' %}">
	<link rel="stylesheet" type="text/css" href="{% static 'css/middle/suggestion-bubbly-button.css' %}">
    <script type="text/javascript" src="{% static 'js/marked/marked.min.js' %}"></script>
	<script type="text/javascript" src="{% static 'js/jquery/1.10.2/jquery.min.js' %}"></script>
</head>
<body>
	<div class="left" id="left">
		<div class="left-avatar">
			<a href="javascript:void(0)">
				<img src="/media/{{ avatar }}" width="150" height="140"/>
			</a>
		</div>
		<div class="left-menu" id="left-menu">
			<ul>
	            <li id="li-0" data-toggle="collapse">
					<a href="#codeDiary" id="codeDiary">开发笔记</a>
	            </li>
	            <li id="li-1" data-toggle="collapse">
					<a href="#diary" id="diary">我的动态</a>
	            </li>
	            <li id="li-2" data-toggle="collapse">
	            	<a href="#application" id="application">我的应用</a>
	            </li>
	            <li id="li-3" data-toggle="collapse">
					<a href="#personalCenter" id="personalCenter">关于我<span class="line-through">们</span></a>
	            </li>
	        </ul>
		</div>
		<div class="beian"><a href="http://www.miitbeian.gov.cn/" target="_blank">晋ICP备18012113号-1</a></div>
	</div>
    <div class="middle" id="middle">
        <div id="matter0" class="matter0 codeDiary" style="display: none;"><ul></ul></div>
        <div id="matter1" class="matter1 diary" style="display: none;"><ul></ul></div>
		<div id="matter2" class="matter2" style="display: none"></div>
        <div id="matter3" class="matter3" style="display: none">
        	<nav class="personalCenter-menu">
        		<ul>
        			<li id="hli-0" data-toggle="collapse">
        				<a href="javascript:void(0)">网站简介</a>
        			</li>
        			<li id="hli-1" data-toggle="collapse">
        				<a href="javascript:void(0)">开发人员</a>
        			</li>
        			<li id="hli-2" data-toggle="collapse">
        				<a href="javascript:void(0)">联系我们</a>
        			</li>
        			<li id="hli-3" data-toggle="collapse">
        				<a href="javascript:void(0)">反馈建议</a>
        			</li>
        		</ul>
        	</nav>
			<span class="target"></span>
			<span class="target"></span>
	    	<div id="matter3_0" class="matter3-0" style="display: block;">
	    		
       		</div>
        	<div id="matter3_1" class="matter3-1" style="display: none;">
        		
        	</div>
        	<div id="matter3_2" class="matter3-2" style="display: none;">
	    		
       		</div>
        	<div id="matter3_3" class="matter3-3" style="display: none;">
        		<div class="suggestion">
			        <div class="suggestion-input-field">
			            <input id="suggestion_nike_name" type="text" placeholder="昵称 (选填)">
			            <span></span>
			        </div>
			        <div class="suggestion-input-field suggestion-user-email">
			            <input id="suggestion_user_email" type="text" placeholder="邮箱 (必填)">
			            <span></span>
			        </div>
			        <div class="suggestion-input-field suggestion_content">
			            <input id="suggestion_content" type="text" placeholder="留下您的意见">
			            <span></span>
			        </div>
			        <div class="suggestion-comment-hint"></div>
			        <div class="suggestion-submit-button">
			            <button class="suggestion-bubbly-button" onclick="matter33SendMessage()">发送</button>
			        </div>
			        <script>
		                var animateButton = function(e) {
		    
		                    e.preventDefault;
		                    //reset animation
		                    e.target.classList.remove('animate');
		                    e.target.classList.add('animate');
		                    setTimeout(function(){
		                        e.target.classList.remove('animate');
		                    },700);

		                };

		                var classname = document.getElementsByClassName("suggestion-bubbly-button");

		                for (var i = 0; i < classname.length; i++) {
		                    classname[i].addEventListener('click', animateButton, false);
		                }
		            </script>
			    </div>
        	</div>
	    </div>
    </div>
    <div class="right">
    	<div class="signature">
    		<span class="qm">签 名</span>
    		<div class="signature-text">
    		<div class="signature-text1"><span style="opacity:0;">{{ signature }}</span></div>
    		<div class="signature-text2">{{ signature }}</div>
    		</div>
    	</div>
    </div>
    <div id="windowBackground" class="windowBackground"></div>
    <div id='window' class="openWindow"></div>
    <script type="text/javascript">
		URLHREF = window.location.href
		MAINURL = URLHREF.split('#')[0]
		URLHASH = URLHREF.split('?')[0].split('/')[3]
		if (URLHASH == ''){
			URLHASH = '#codeDiary'
		}
		try{
			LINUM = $(URLHASH).parent().attr('id').split('-')[1]
		}
		catch(err){
			window.location.href = MAINURL + '404'
		}
		var clientWidth = document.documentElement.clientWidth
		var textWidth = Math.round((Math.round(clientWidth*0.55)-19)*0.8-20)
		var letter_spacing = 2
		var font_size = 15
		TEXTMAXLENGTH = Math.floor((textWidth+letter_spacing)/(letter_spacing+font_size))
		// TEXMAXLENGTH = 37
		nowMatter = 'matter0'
    </script>
    <script type="text/javascript" src="{% static 'js/main.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/ajax.js' %}"></script>
    <script type="text/javascript" src="{% static 'js/window.js' %}"></script>
    <script src="http://pv.sohu.com/cityjson?ie=utf-8"></script>
	<script type="text/javascript">
		(function (){
			function json2str(data){
				var date = data.date_chi
				if (date == ''){
					date = data.date
				}
				if (data.tem_day == null && data.tem_night == null){
					var tem = ''
				}
				else if (data.tem_day == null){
					var tem = data.tem_night + '°C'
				}
				else if (data.tem_night == null){
					var tem = data.tem_day + '°C'
				}
				else if (parseInt(data.tem_day) > parseInt(data.tem_night)){
					var tem = data.tem_night + '~' + data.tem_day + '°C'
				}
				else if (parseInt(data.tem_day) < parseInt(data.tem_night)){
					var tem = data.tem_day + '~' + data.tem_night + '°C'
				}
				else if (parseInt(data.tem_day) == parseInt(data.tem_night)){
					var tem = data.tem_day + '°C'
				}
				else{
					var tem = ''
				}
				if (data.weather_day == null && data.weather_night == null){
					var weather = ''
				}
				else if (data.weather_day == null){
					var weather = data.weather_night
				}
				else if (data.weather_night == null){
					var weather = data.weather_day
				}
				else if (data.weather_day == data.weather_night){
					var weather = data.weather_day
				}
				else{
					var weather = data.weather_day + '转' + data.weather_night
				}
				if (data.wdp_day == null && data.wdp_night == null){
					var wdp = ''
				}
				else if (data.wdp_day == null){
					var wdp = data.wdp_night
				}
				else if (data.wdp_night == null){
					var wdp = data.wdp_day
				}
				else{
					var wdp = data.wdp_day
				}
				return {'weather':weather,'tem':tem,'date':date,'wdp':wdp}
			}
			$.ajax({
				type: 'POST',
				url: 'http://api.shujuzhihui.cn/api/weather/ip',
				data: {'appKey':'9057ff088d24450b93d896cf317835f4','ip':returnCitySN["cip"],'n7':1},
				success:function(data){
					if (data.ERRORCODE == '0'){
						var city = data.RESULT.area_maybe
						if (city = []){
							var area = data.RESULT.areaInfo
							city = area.county + area.province + area.city
						}
						var d1 = data.RESULT.weatherInfo.n7.d1
						var d2 = data.RESULT.weatherInfo.n7.d2
						var d3 = data.RESULT.weatherInfo.n7.d3
						var day1 = json2str(d1)
						var day2 = json2str(d2)
						var day3 = json2str(d3)
						console.log(city)
						console.log(day1.date+': '+day1.weather+' '+day1.tem+' '+day1.wdp)
						console.log(day2.date+': '+day2.weather+' '+day2.tem+' '+day2.wdp)
						console.log(day3.date+': '+day3.weather+' '+day3.tem+' '+day3.wdp)
						console.log(data)
					}
					else{
						console.log('error:'+data.ERRORCODE+' result:'+data.RESULT)
					}
	        	}
	    	})
		})()
	</script>
</body>
</html>